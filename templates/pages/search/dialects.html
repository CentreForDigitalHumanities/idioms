{% extends "page_base.html" %}

{% block title %}Search results: dialects{% endblock %}

{% block content %}

<h1 class="title is-1">Search results: dialects</h1>

{% if args %}

    {% set count_query, main_query, wheres_values = build_search_sql(args, 'dialect') %}

    {% if args.get('_trace') == '1' %}
        <div class="box">
            <pre>{{ args }}</pre>
            <pre>WHERE values: {{ wheres_values }}</pre>
            <pre>{{ main_query }}</pre>
        </div>
    {% endif %}

    <p>
        {{ sql(count_query, wheres_values)[0].cnt }} records found.
    </p>

    <table class="table is-striped is-hoverable is-fullwidth">
        <thead>
            <tr>
                <th></th>
                <th>Name</th>
                <th>Principal location</th>
            </tr>
        </thead>
        <tbody>
        {% for row in sql(main_query, wheres_values) %}
        <tr>
            <th>{{ row.row_num }}</th>
            <td><a href="/dialects/{{ row.strategy_answerset_id }}">{{ row.answerset_name }}</a></td>
            <td>{{ row.answerset_description }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}

{% endblock %}
